(function(e){"use strict";function t(e,t){var n=decodeURIComponent(e);if(n.length<=t){return e}var r=n.substring(0,t-1).lastIndexOf(" ");n=encodeURIComponent(n.substring(0,r))+"…";return n}function n(t){var n=e('meta[name="'+t+'"]').attr("content");return n||""}function r(){var t=n("DC.title");var r=n("DC.creator");if(t.length>0&&r.length>0){t+=" - "+r}else{t=e("title").text()}return encodeURIComponent(t)}function i(){var t=document.location.href;var n=e("link[rel=canonical]").attr("href");if(n&&n.length>0){if(n.indexOf("http")<0){n=document.location.protocol+"//"+document.location.host+n}t=n}return t}function s(e,t,n,r,i){var s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3);document.cookie=e+"="+t+"; expires="+s.toUTCString()+"; path="+r+"; domain="+i}function o(e,t,n,r){var i=new Date;i.setTime(i.getTime()-7*24*60*60*1e3);document.cookie=e+"="+t+"; expires="+i.toUTCString()+"; path="+n+"; domain="+r}function u(e,t,n){e.addClass("info_off").find(t).replaceWith(n)}function a(e,t,n){e.removeClass("info_off").find(t).html(n)}e.fn.socialSharePrivacy=function(n){var f={services:{facebook:{status:"on",dummy_img:"sspoc/img/dummy_facebook.png",txt_info:"2 Klicks für mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie können Ihre Empfehlung an Facebook senden. Schon beim Aktivieren werden Daten an Dritte übertragen – siehe <em>i</em>.",txt_fb_off:"nicht mit Facebook verbunden",txt_fb_on:"mit Facebook verbunden",perma_option:"on",display_name:"Facebook",referrer_track:"",language:"de_DE",action:"recommend"},twitter:{status:"on",dummy_img:"sspoc/img/dummy_twitter.png",txt_info:"2 Klicks für mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie können Ihre Empfehlung an Twitter senden. Schon beim Aktivieren werden Daten an Dritte übertragen – siehe <em>i</em>.",txt_twitter_off:"nicht mit Twitter verbunden",txt_twitter_on:"mit Twitter verbunden",perma_option:"on",display_name:"Twitter",referrer_track:"",tweet_text:r,language:"en"},gplus:{status:"on",dummy_img:"sspoc/img/dummy_gplus.png",txt_info:"2 Klicks für mehr Datenschutz: Erst wenn Sie hier klicken, wird der Button aktiv und Sie können Ihre Empfehlung an Google+ senden. Schon beim Aktivieren werden Daten an Dritte übertragen – siehe <em>i</em>.",txt_gplus_off:"nicht mit Google+ verbunden",txt_gplus_on:"mit Google+ verbunden",perma_option:"on",display_name:"Google+",referrer_track:"",language:"de"}},info_link:"http://www.heise.de/ct/artikel/2-Klicks-fuer-mehr-Datenschutz-1333879.html",txt_help:"Wenn Sie diese Felder durch einen Klick aktivieren, werden Informationen an Facebook, Twitter oder Google in die USA übertragen und unter Umständen auch dort gespeichert. Näheres erfahren Sie durch einen Klick auf das <em>i</em>.",settings_perma:"Dauerhaft aktivieren und Datenüber­tragung zustimmen:",cookie_path:"/",cookie_domain:document.location.host,cookie_expires:"365",css_path:"sspoc/ssp-oneclick.css",uri:i,txt_activate_all:"Share-Buttons aktivieren",txt_deactivate_all:"Share-Buttons deaktivieren"};var l=e.extend(true,f,n);var c=l.services.facebook.status==="on";var h=l.services.twitter.status==="on";var p=l.services.gplus.status==="on";if(!c&&!h&&!p){return}if(l.css_path.length>0){if(document.createStyleSheet){document.createStyleSheet(l.css_path)}else{e("head").append('<link rel="stylesheet" type="text/css" href="'+l.css_path+'" />')}}return this.each(function(){e(this).prepend('<ul class="ssp_area"></ul>');var n=e("ul.ssp_area",this);var r=l.uri;if(typeof r==="function"){r=r(n)}if(c){var i=encodeURIComponent(r+l.services.facebook.referrer_track);var f='<iframe src="http://www.facebook.com/plugins/like.php?locale='+l.services.facebook.language+"&href="+i+"&send=false&layout=button_count&width=120&show_faces=false&action="+l.services.facebook.action+'&colorscheme=light&font&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:145px; height:21px;" allowTransparency="true"></iframe>';var d='<img src="'+l.services.facebook.dummy_img+'" alt="Facebook "Like"-Dummy" class="fb_dummy dummy_img" data-service="fb" />';n.append('<li class="facebook help_info"><span class="info">'+l.services.facebook.txt_info+'</span><div class="fb_like dummy_btn">'+d+"</div></li>");var v=e("li.facebook",n)}if(h){var m=l.services.twitter.tweet_text;if(typeof m==="function"){m=m()}m=t(m,"120");var g=encodeURIComponent(r+l.services.twitter.referrer_track);var y=encodeURIComponent(r);var b='<iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+g+"&counturl="+y+"&text="+m+"&count=horizontal&lang="+l.services.twitter.language+'" style="width:100px; height:25px;"></iframe>';var w='<img src="'+l.services.twitter.dummy_img+'" alt=""Tweet this"-Dummy" class="twitter_dummy dummy_img" data-service="twitter" />';n.append('<li class="twitter help_info"><span class="info">'+l.services.twitter.txt_info+'</span><div class="tweet dummy_btn">'+w+"</div></li>");var E=e("li.twitter",n)}if(p){var S=r+l.services.gplus.referrer_track;var x='<div class="g-plusone" data-size="medium" data-href="'+S+'"></div><script type="text/javascript">window.___gcfg = {lang: "'+l.services.gplus.language+'"}; (function() { var po = document.createElement("script"); po.type = "text/javascript"; po.async = true; po.src = "https://apis.google.com/js/plusone.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s); })(); </script>';var T='<img src="'+l.services.gplus.dummy_img+'" alt=""Google+1"-Dummy" class="gplus_dummy dummy_img" data-service="gplus" />';n.append('<li class="gplus help_info"><span class="info">'+l.services.gplus.txt_info+'</span><div class="gplusone dummy_btn">'+T+"</div></li>");var N=e("li.gplus",n)}e(n).on("click","img.dummy_img",function(t){switch(e(t.target).data("service")){case"fb":u(v,"img.fb_dummy",f);break;case"twitter":u(E,"img.twitter_dummy",b);break;case"gplus":u(N,"img.gplus_dummy",x);break}});var C=e('<span class="off btn">').html(l.txt_activate_all).click(function(){if(e(this).hasClass("off")){if(c)u(v,"img.fb_dummy",f);if(h)u(E,"img.twitter_dummy",b);if(p)u(N,"img.gplus_dummy",x);e(this).removeClass("off").html(l.txt_deactivate_all)}else{if(c)a(v,".fb_like",d);if(h)a(E,".tweet",w);if(p)a(N,".gplusone",T);e(this).addClass("off").html(l.txt_activate_all)}});n.append(e('<li class="settings_info">').append(e('<div class="settings_info_menu off perma_option_off">').append(C).append('<a href="'+l.info_link+'"><span class="help_info icon"><span class="info">'+l.txt_help+"</span></span></a>")));e(".help_info:not(.info_off)",n).on("mouseenter",function(){var t=e(this);var n=window.setTimeout(function(){e(t).addClass("display")},250);e(this).data("timeout_id",n)});e(".help_info",n).on("mouseleave",function(){var t=e(this).data("timeout_id");window.clearTimeout(t);if(e(this).hasClass("display")){e(this).removeClass("display")}});var k=l.services.facebook.perma_option==="on";var L=l.services.twitter.perma_option==="on";var A=l.services.gplus.perma_option==="on";if((c&&k||h&&L||p&&A)&&JSON&&typeof JSON.parse==="function"){var O=document.cookie.split(";");var M="{";var _=0;for(;_<O.length;_+=1){var D=O[_].split("=");M+='"'+e.trim(D[0])+'":"'+e.trim(D[1])+'"';if(_<O.length-1){M+=","}}M+="}";M=JSON.parse(M);var P=e("li.settings_info",n);P.find(".settings_info_menu").removeClass("perma_option_off");P.find(".settings_info_menu").append('<span class="settings">Einstellungen</span><form><fieldset><legend>'+l.settings_perma+"</legend></fieldset></form>");var H=' checked="checked"';if(c&&k){var B=M.socialSharePrivacy_facebook==="perma_on"?H:"";P.find("form fieldset").append('<input type="checkbox" name="perma_status_facebook" id="perma_status_facebook"'+B+' /><label for="perma_status_facebook">'+l.services.facebook.display_name+"</label>")}if(h&&L){var j=M.socialSharePrivacy_twitter==="perma_on"?H:"";P.find("form fieldset").append('<input type="checkbox" name="perma_status_twitter" id="perma_status_twitter"'+j+' /><label for="perma_status_twitter">'+l.services.twitter.display_name+"</label>")}if(p&&A){var F=M.socialSharePrivacy_gplus==="perma_on"?H:"";P.find("form fieldset").append('<input type="checkbox" name="perma_status_gplus" id="perma_status_gplus"'+F+' /><label for="perma_status_gplus">'+l.services.gplus.display_name+"</label>")}P.find("span.settings").css("cursor","pointer");e(P.find("span.settings"),n).on("mouseenter",function(){var t=window.setTimeout(function(){P.find(".settings_info_menu").removeClass("off").addClass("on")},500);e(this).data("timeout_id",t)});e(P,n).on("mouseleave",function(){var t=e(this).data("timeout_id");window.clearTimeout(t);P.find(".settings_info_menu").removeClass("on").addClass("off")});e(P.find("fieldset input")).on("click",function(t){var r=t.target.id;var i=r.substr(r.lastIndexOf("_")+1,r.length);var u="socialSharePrivacy_"+i;if(e(t.target).is(":checked")){s(u,"perma_on",l.cookie_expires,l.cookie_path,l.cookie_domain);e("form fieldset label[for="+r+"]",n).addClass("checked")}else{o(u,"perma_on",l.cookie_path,l.cookie_domain);e("form fieldset label[for="+r+"]",n).removeClass("checked")}});if(c&&k&&M.socialSharePrivacy_facebook==="perma_on"){u(v,"img.fb_dummy",f)}if(h&&L&&M.socialSharePrivacy_twitter==="perma_on"){u(E,"img.twitter_dummy",b)}if(p&&A&&M.socialSharePrivacy_gplus==="perma_on"){u(N,"img.gplus_dummy",x)}}})}})(jQuery)